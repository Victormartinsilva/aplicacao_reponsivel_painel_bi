<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power BI Embed Responsivo</title>
    <style>
        /*
        * Estilos CSS para garantir a responsividade e o layout.
        * O objetivo é que o iframe do Power BI ocupe a maior parte da tela.
        */

        body {
            /* Remove margens e paddings padrão do corpo da página */
            margin: 0;
            padding: 0;
            /* Define a altura mínima para ocupar toda a viewport */
            min-height: 100vh;
            /* Usa Flexbox para centralizar o conteúdo verticalmente */
            display: flex;
            flex-direction: column;
            /* Garante que o fundo seja branco ou de cor neutra */
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        .container {
            /* Ocupa o espaço restante da tela */
            flex-grow: 1;
            /* Usa Flexbox para o container principal */
            display: flex;
            /* Centraliza o conteúdo horizontalmente */
            justify-content: center;
            /* Centraliza o conteúdo verticalmente */
            align-items: center;
            /* Adiciona um pequeno padding para não encostar nas bordas */
            padding: 10px;
        }

        .powerbi-embed-wrapper {
            /* Define a largura máxima para o wrapper */
            width: 100%;
            /* Define a altura máxima para o wrapper */
            max-height: 100%;
            /* Adiciona um aspecto de proporção para o iframe.
            * O Power BI geralmente tem uma proporção de 16:9 ou 4:3.
            * Usaremos um truque de padding-bottom para manter a proporção.
            * 56.25% = 9/16 * 100 (para 16:9)
            * 75% = 3/4 * 100 (para 4:3)
            * Vamos usar 75% para um aspecto mais quadrado, comum em relatórios.
            */
            padding-bottom: 75%; /* Proporção 4:3 */
            position: relative;
            /* Adiciona uma sombra para destacar o painel */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            /* Garante que o wrapper não ultrapasse a largura da tela */
            max-width: 1200px;
        }

        .powerbi-embed-wrapper iframe {
            /* O iframe deve ocupar 100% do espaço do wrapper */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Remove a borda padrão do iframe */
            border: none;
        }

        /*
        * Media Query para dispositivos móveis (largura máxima de 768px).
        * Em dispositivos móveis, o painel deve ocupar a largura total
        * e ter uma altura mais flexível para melhor visualização.
        */
        @media (max-width: 768px) {
            .container {
                /* Remove o alinhamento vertical para permitir rolagem */
                align-items: flex-start;
                padding: 5px;
            }

            .powerbi-embed-wrapper {
                /* Em mobile, a proporção 4:3 pode ser muito larga.
                * Vamos usar uma proporção mais alta, como 16:9 (56.25%),
                * ou simplesmente deixar a altura mais flexível.
                * Para este exemplo, vamos manter a proporção 4:3, mas
                * garantindo que ocupe a largura total.
                */
                padding-bottom: 75%; /* Mantém 4:3 */
                /* Garante que ocupe a largura total da tela */
                width: 100%;
                max-width: none;
            }

            /* Adiciona uma mensagem para indicar que é a visualização mobile */
            .device-indicator::before {
                content: "Visualização Mobile (Ajuste de Layout)";
                display: block;
                text-align: center;
                padding: 10px;
                background-color: #ffeb3b; /* Amarelo claro */
                color: #333;
                font-weight: bold;
                margin-bottom: 10px;
                border-radius: 5px;
            }
        }

        /*
        * Media Query para dispositivos desktop (largura mínima de 769px).
        */
        @media (min-width: 769px) {
            /* Adiciona uma mensagem para indicar que é a visualização desktop */
            .device-indicator::before {
                content: "Visualização Desktop (Layout Otimizado)";
                display: block;
                text-align: center;
                padding: 10px;
                background-color: #4caf50; /* Verde */
                color: white;
                font-weight: bold;
                margin-bottom: 10px;
                border-radius: 5px;
            }
        }

        /* Estilo para o cabeçalho/indicador */
        .device-indicator {
            width: 100%;
            max-width: 1200px; /* Mesma largura máxima do wrapper */
            margin: 0 auto;
            padding: 10px;
        }

    </style>
</head>
<body>

    <!-- Indicador de dispositivo (Desktop/Mobile) -->
    <div class="device-indicator"></div>

    <div class="container">
        <!-- Wrapper para o iframe, responsável por manter a proporção -->
        <div class="powerbi-embed-wrapper">
            <!--
            * O iframe é o elemento HTML que incorpora o painel do Power BI.
            * O atributo 'src' recebe a URL de embed passada pelo Flask.
            * 'allowfullscreen' permite que o usuário veja o painel em tela cheia.
            * 'sandbox' é uma medida de segurança para restringir o que o iframe pode fazer.
            -->
            <iframe
                title="Power BI Report"
                width="100%"
                height="100%"
                src="{{ power_bi_url }}"
                frameborder="0"
                allowFullScreen="true"
                sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-modals allow-storage-access-by-user-activation"
            ></iframe>
        </div>
    </div>

    <!--
    * Nota didática:
    * A responsividade é alcançada principalmente pelo CSS:
    * 1. O 'viewport' meta tag garante que a página se ajuste à largura do dispositivo.
    * 2. O Flexbox no 'body' e 'container' ajuda a centralizar e distribuir o espaço.
    * 3. O truque do 'padding-bottom' no '.powerbi-embed-wrapper' mantém a proporção
    *    do iframe (4:3 neste caso), garantindo que ele não fique distorcido.
    * 4. As '@media queries' ajustam o layout e adicionam o indicador de dispositivo
    *    com base na largura da tela (<= 768px para mobile, > 768px para desktop).
    -->

</body>
</html>
